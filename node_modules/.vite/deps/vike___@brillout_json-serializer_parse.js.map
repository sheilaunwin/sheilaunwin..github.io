{
  "version": 3,
  "sources": ["../../@brillout/json-serializer/dist/parse.js"],
  "sourcesContent": ["export { parse };\n// Used by Vike: https://github.com/vikejs/vike/blob/b4ba6b70e6bdc2e1f460c0d2e4c3faae5d0a733c/vike/shared/page-configs/serialize/parseConfigValuesSerialized.ts#L13\nexport { parseTransform };\nimport { types } from './types.js';\nfunction parse(str, options = {}) {\n    // We don't use the reviver option in `JSON.parse(str, reviver)` because it doesn't support `undefined` values\n    const value = JSON.parse(str);\n    return parseTransform(value, options);\n}\nfunction parseTransform(value, options = {}) {\n    if (typeof value === 'string') {\n        return reviver(value, options);\n    }\n    if (\n    // Also matches arrays\n    typeof value === 'object' &&\n        value !== null) {\n        Object.entries(value).forEach(([key, val]) => {\n            ;\n            value[key] = parseTransform(val, options);\n        });\n    }\n    return value;\n}\nfunction reviver(value, options) {\n    const parser = (str) => parse(str, options);\n    {\n        const res = options.reviver?.(\n        // TO-DO/eventually: provide key if some user needs it\n        undefined, value, parser);\n        if (res) {\n            if (typeof res.replacement !== 'string') {\n                return res.replacement;\n            }\n            else {\n                value = res.replacement;\n                if (res.resolved)\n                    return value;\n            }\n        }\n    }\n    for (const { match, deserialize } of types) {\n        if (match(value)) {\n            return deserialize(value, parser);\n        }\n    }\n    return value;\n}\n"],
  "mappings": ";;;;;;AAIA,SAAS,MAAM,KAAK,UAAU,CAAC,GAAG;AAE9B,QAAM,QAAQ,KAAK,MAAM,GAAG;AAC5B,SAAO,eAAe,OAAO,OAAO;AACxC;AACA,SAAS,eAAe,OAAO,UAAU,CAAC,GAAG;AACzC,MAAI,OAAO,UAAU,UAAU;AAC3B,WAAO,QAAQ,OAAO,OAAO;AAAA,EACjC;AACA;AAAA;AAAA,IAEA,OAAO,UAAU,YACb,UAAU;AAAA,IAAM;AAChB,WAAO,QAAQ,KAAK,EAAE,QAAQ,CAAC,CAAC,KAAK,GAAG,MAAM;AAC1C;AACA,YAAM,GAAG,IAAI,eAAe,KAAK,OAAO;AAAA,IAC5C,CAAC;AAAA,EACL;AACA,SAAO;AACX;AACA,SAAS,QAAQ,OAAO,SAAS;AAxBjC;AAyBI,QAAM,SAAS,CAAC,QAAQ,MAAM,KAAK,OAAO;AAC1C;AACI,UAAM,OAAM,aAAQ,YAAR;AAAA;AAAA;AAAA,MAEZ;AAAA,MAAW;AAAA,MAAO;AAAA;AAClB,QAAI,KAAK;AACL,UAAI,OAAO,IAAI,gBAAgB,UAAU;AACrC,eAAO,IAAI;AAAA,MACf,OACK;AACD,gBAAQ,IAAI;AACZ,YAAI,IAAI;AACJ,iBAAO;AAAA,MACf;AAAA,IACJ;AAAA,EACJ;AACA,aAAW,EAAE,OAAO,YAAY,KAAK,OAAO;AACxC,QAAI,MAAM,KAAK,GAAG;AACd,aAAO,YAAY,OAAO,MAAM;AAAA,IACpC;AAAA,EACJ;AACA,SAAO;AACX;",
  "names": []
}
